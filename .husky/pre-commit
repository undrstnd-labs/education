#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ‘· Avant de valider vos modifications, nous effectuons une sÃ©rie d'opÃ©rations pour assurer la qualitÃ© du code."

pnpm run check-format ||
(
    echo 'ğŸ¤¢ Formatage incorrect.
            La vÃ©rification de Prettier a Ã©chouÃ©. ExÃ©cutez "pnpm run format", ajoutez les modifications et essayez de valider Ã  nouveau.';
    false;
)

pnpm run check-lint ||
(
        echo 'ğŸ“• Ã‰chec de la vÃ©rification ESLint. 
                La vÃ©rification ESLint a Ã©chouÃ©. Effectuez les modifications requises rÃ©pertoriÃ©es ci-dessus, ajoutez les modifications et essayez de valider Ã  nouveau.'
        false; 
)

pnpm run check-types ||
(
    echo 'ğŸ“‘ Ã‰chec de la vÃ©rification des types.
            Voulez-vous vraiment Ã©crire cela ? Effectuez les modifications requises ci-dessus.'
    false;
)

echo 'ğŸ—ï¸ Tentative de construction du projet...'

pnpm run build ||
(
    echo 'âŒ Ã‰chec de la construction.
            La construction avec Next.js a Ã©chouÃ© : consultez les erreurs ci-dessus pour en connaÃ®tre la raison.'
    false;
)

echo 'âœ… Tout est passÃ© avec succÃ¨s. Vous pouvez valider vos modifications maintenant.'